{% include 'index.html' %}
{% include 'video_info.html' %}

{% block content %}
<!--
        <a href={{"/chart/{}".format(video_info['id'])}} target="_blank"><button class="btn btn-primary">Analyze</button></a>
-->

<div class="row justify-content-center mt-5">
    <form name="options" class="filter-form">
        <div class="row justify-content-center">
            <div class="row justify-content-center">
                <div class="col justify-content-center">
                    <label>Filters</label>
                    <i class="fas fa-question-circle" title="Space-separated emote names or text. &quot;case-sensitive text&quot; 'any-case text'"></i>
                </div>
            </div>
            <textarea name="filters" placeholder="LULW &quot;LUL&quot; 'lul'" class="form-control"></textarea>
            <div class="form-group">
                <button type="submit" class="btn btn-primary btn-lg mt-3">Analyze</button>
            </div>
        </div>
    </form>
</div>



<script>
        const form = document.forms.options;

        function handleSubmit(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
        }

        form.addEventListener('submit', handleSubmit);

        function handleSubmit(event) {
                event.preventDefault();
                const formData = new FormData(event.target);
                const data = [...formData.entries()];
                const asString = data
                        .map(x => `${encodeURIComponent(x[0])}=${encodeURIComponent(x[1])}`)
                        .join('&');
                console.log(asString);

                var link = "{{"/chart/{}".format(video_info['id'])}}?" + asString;

                console.log(link);
                window.open(link, '_blank')
        }

</script>
{% endblock %}

<!--
<form method="post" action="/chart">
        <div class="form-group">

        </div>
</form>
-->